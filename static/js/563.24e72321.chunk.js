"use strict";(self.webpackChunkaston_react=self.webpackChunkaston_react||[]).push([[563],{7952:(e,n,r)=>{r.d(n,{R:()=>o,b:()=>s});var t=r(2791),i=r(6812);const o=()=>(0,t.useContext)(i.ci),s=()=>(0,t.useContext)(i.ls)},5219:(e,n,r)=>{r.d(n,{t:()=>E});var t,i,o,s=r(2791),a=r(7689),d=r(1087),c=r(168),l=r(1134),h=r(5867),u=r(272),x=r(8345),p=r(7952),b=r(9869),m=r(8839),f=r(3527),g=r(184);const v=e=>{const{beers:n,searchValue:r,debounceValue:t,isLoading:i,focus:o}=e;return(0,g.jsx)(g.Fragment,{children:o&&r&&t&&(0,g.jsx)(j,{children:i?(0,g.jsx)(w,{children:(0,g.jsx)(m.P3,{children:"Loading...."})}):0===n.length?(0,g.jsx)(w,{children:(0,g.jsx)(m.P3,{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})}):n.map((e=>(0,g.jsx)(b.r,{to:"".concat(f.Z.CARD,"/").concat(e.id),children:(0,g.jsx)(Z,{children:(0,g.jsx)(m.P1,{children:e.name})})},e.id)))})})},j=h.ZP.ul(t||(t=(0,c.Z)(["\n  position: absolute;\n  top: 110px;\n  width: 315px;\n  min-height: 20px;\n  max-height: 300px;\n  overflow: overlay;\n  background: ",";\n  border-radius: ",";\n  z-index: 10;\n"])),(e=>e.theme.colors.white),(e=>e.theme.borders.primary)),Z=h.ZP.li(i||(i=(0,c.Z)(["\n  padding: 10px 0 5px 10px;\n"]))),w=h.ZP.div(o||(o=(0,c.Z)(["\n  text-align: center;\n"])));var P;const S={search:""},y=e=>{const[n]=(0,d.lr)(),[r,t]=(0,s.useState)(!1),i=(0,p.b)(),{onSubmitForm:o,beers:a,isLoading:c,debounceValue:h}=e,{register:b,reset:m,handleSubmit:f,watch:j,setValue:Z,formState:{errors:w,isSubmitting:P,isDirty:y}}=(0,l.cI)({defaultValues:S,mode:"onBlur",criteriaMode:"all"}),F=n.get("beer_name");(0,s.useEffect)((()=>{F&&Z("search",h)}),[Z,h,F]);let C=j("search",S.search);(0,s.useEffect)((()=>{i({type:"addSearchValue",searchValue:C})}),[i,C]);return(0,g.jsxs)(k,{onSubmit:f((e=>{o(e),m()})),children:[(0,g.jsx)(u.I,{placeholder:"Search beers ...",type:"search",...b("search"),errorOn:!!w.search,onFocus:()=>{t(!0)},onBlur:()=>{setTimeout((()=>{t(!1)}),100)}}),(0,g.jsx)(v,{beers:a,searchValue:C,debounceValue:h,isLoading:c,focus:r}),(0,g.jsx)(x.z,{type:"submit",size:"middle",disabled:!y||P,children:"Search"})]})},k=h.ZP.form(P||(P=(0,c.Z)(["\n  display: flex;\n  gap: 10px;\n  width: 100%;\n  background-color: ",";\n  border-top: 2px solid ",";\n  padding: 10px 0 0 10px;\n"])),(e=>e.theme.colors.black),(e=>e.theme.colors.accent));var F=r(8862),C=r(6045),V=r(3822),I=r(9322);const E=()=>{const[e,n]=(0,d.lr)(),r=(0,F.T)(),t=(0,a.s0)(),i=(0,F.C)(C.u.getIsAuth),o=function(e,n){const[r,t]=(0,s.useState)(e);return(0,s.useEffect)((()=>{const r=setTimeout((()=>t(e)),n||500);return()=>{clearTimeout(r)}}),[e,n]),r}((0,p.R)().searchValue,2e3),{data:c=[],isLoading:l}=(0,I.Q9)({beerName:o},{skip:!Boolean(o)});return(0,g.jsx)(y,{beers:c,isLoading:l,debounceValue:o,onSubmitForm:e=>{t(f.Z.SEARCH),n({beer_name:e.search}),i&&r((0,V.Ve)(e.search))}})}},4563:(e,n,r)=>{r.r(n),r.d(n,{default:()=>y});var t=r(2791),i=r(6365),o=r(168),s=r(5867),a=r(1087),d=r(6287),c=r(3052);const l=e=>{const[n,r]=(0,t.useState)(e),i=()=>{const e=document.body.offsetHeight,n=window.innerHeight;window.scrollY+n>=e-n/4&&r((e=>e+1))};return(0,t.useEffect)((()=>(document.addEventListener("scroll",((e,n)=>{let r=!1;return function(){r||(e(),r=!0,setTimeout((()=>{r=!1}),n))}})(i,500)),function(){document.removeEventListener("scroll",i)})),[]),n};var h,u,x=r(28),p=r(8862),b=r(3828),m=r(8839),f=r(184);const g=()=>{const e=l(1),[n,r]=(0,a.lr)();(0,t.useEffect)((()=>{r({page:String(e)})}),[e,r]);const i=Number(n.get("page")),{data:o=[],isLoading:s,isSuccess:h,isError:u,error:g}=(0,x.SI)({page:i},{skip:!i}),Z=(0,p.C)(b.M.getFavorites),w=o.map((e=>{const n=Z.find((n=>n.id===e.id));return n?{...e,isFavorite:n.isFavorite}:{...e,isFavorite:!1}}));let P;if(s)P=(0,f.jsx)(c.a,{});else if(h)P=(0,f.jsx)(j,{children:0!==w.length?w.map((e=>{var n;return(0,f.jsx)(d.D,{id:e.id,name:e.name,imageUrl:e.imageUrl,description:e.description,abv:e.abv,ibu:null!==(n=e.ibu)&&void 0!==n?n:"",isFavorite:e.isFavorite},e.id)})):(0,f.jsx)(m.P3,{children:"The beer is out"})});else if(u)throw new Error(g.toString());return(0,f.jsx)(v,{children:P})},v=s.ZP.div(h||(h=(0,o.Z)(["\n  width: 60%;\n"]))),j=s.ZP.ul(u||(u=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 20px 0 80px 0;\n"])));var Z=r(5219),w=r(9784),P=r(9778),S=r(6045);const y=()=>{const e=(0,p.T)(),n=(0,p.C)(S.u.getUserStatus);return(0,t.useEffect)((()=>{e((0,P._)())}),[e]),"initial"===n||"pending"===n?(0,f.jsx)(w.i,{}):(0,f.jsxs)(i.N,{children:[(0,f.jsx)(Z.t,{}),(0,f.jsx)(g,{})]})}},3828:(e,n,r)=>{r.d(n,{M:()=>t});const t={getFavorites:e=>e.favourites.favorites,getIsFavourites:e=>e.favourites.isFavorites}},3822:(e,n,r)=>{r.d(n,{Ve:()=>o,Wq:()=>a,xt:()=>s});var t=r(2637),i=r(521);const o=e=>n=>{t.X.addStory(e),n((0,i.gs)(e))},s=e=>n=>{t.X.deleteStory(e),n((0,i.OD)(e))},a=()=>e=>{const n=t.X.getCurrentUser();e(n?(0,i.zX)(n.data.history):(0,i.zX)([]))}},6287:(e,n,r)=>{r.d(n,{D:()=>w});var t,i,o,s,a,d=r(168),c=r(2791),l=r(5867),h=r(9869),u=r(8345),x=r(8839),p=r(7938),b=r(8218),m=r(3527),f=r(8862),g=r(6045),v=r(579),j=r(1308),Z=r(184);const w=(0,c.memo)((e=>{const n=(0,f.T)(),{id:r,name:t,imageUrl:i,description:o,abv:s,ibu:a,isFavorite:d}=e,c=(0,f.C)(g.u.getIsAuth),[l,w]=(0,b.O)(d);return(0,Z.jsxs)(P,{children:[(0,Z.jsx)(S,{children:(0,Z.jsx)(y,{to:"".concat(m.Z.CARD,"/").concat(r),children:(0,Z.jsx)("img",{src:null!==i&&void 0!==i?i:j,alt:"beer"})})}),(0,Z.jsxs)(k,{children:[(0,Z.jsx)(h.r,{to:"".concat(m.Z.CARD,"/").concat(r),children:(0,Z.jsx)(x.H3,{children:t})}),(0,Z.jsx)(x.P2,{children:o}),(0,Z.jsxs)(x.P4,{children:["ABV-",s,"% IBU-",a]})]}),(0,Z.jsx)(F,{children:c?(0,Z.jsx)(u.z,{size:"small",onClick:()=>{n(l?(0,v.fu)(r):(0,v.IO)(e)),w()},children:(0,Z.jsx)(p.I,{color:l?"blue":"dark"})}):null})]})})),P=l.ZP.li(t||(t=(0,d.Z)(["\n  display: flex;\n  align-items: flex-start;\n  gap: 20px;\n  padding: 15px;\n  background: ",";\n  border-radius: ",";\n  border: 1px solid #7e6464;\n"])),(e=>e.theme.colors.white),(e=>e.theme.borders.primary)),S=l.ZP.div(i||(i=(0,d.Z)(["\n  align-self: center;\n"]))),y=(0,l.ZP)(h.r)(o||(o=(0,d.Z)(["\n  display: block;\n  width: 30px;\n  height: 120px;\n\n  & img {\n    object-fit: cover;\n    width: 100%;\n    height: 100%;\n  }\n"]))),k=l.ZP.div(s||(s=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 30px;\n"]))),F=l.ZP.div(a||(a=(0,d.Z)(["\n  flex: 1 0 auto;\n  text-align: end;\n  min-width: 40px;\n"])))},272:(e,n,r)=>{r.d(n,{I:()=>c});var t,i,o=r(168),s=r(2791),a=r(5867),d=r(184);const c=(0,s.forwardRef)(((e,n)=>{const{errorOn:r,...t}=e;return(0,d.jsx)(l,{children:(0,d.jsx)(h,{$errorOn:r,ref:n,...t})})})),l=a.ZP.div(t||(t=(0,o.Z)(["\n  max-width: 315px;\n  width: 100%;\n"]))),h=a.ZP.input(i||(i=(0,o.Z)(["\n  width: 100%;\n  height: 34px;\n  background: ",";\n  border-radius: ",";\n  border: 1px solid ",";\n  color: ",";\n  padding-left: 10px;\n  margin-bottom: 18px;\n\n  &::placeholder {\n    color: ",";\n  }\n\n  &:hover,\n  :focus {\n    ::placeholder {\n      color: ",";\n    }\n  }\n"])),(e=>e.theme.colors.backgroundInput),(e=>e.theme.borders.primary),(e=>e.$errorOn?e.theme.colors.error:e.theme.colors.white),(e=>e.$errorOn?e.theme.text.error:e.theme.text.textInvert),(e=>e.theme.text.placeholder),(e=>e.theme.text.placeholder))},3052:(e,n,r)=>{r.d(n,{a:()=>l});var t,i,o,s,a=r(168),d=(r(2791),r(5867)),c=r(184);const l=()=>(0,c.jsx)(x,{children:(0,c.jsx)(p,{})}),h=(0,d.F4)(t||(t=(0,a.Z)(["\n  0% { box-shadow: 0 0  inset }\n  50% , 100% { box-shadow: 0 -98px inset }\n"]))),u=(0,d.F4)(i||(i=(0,a.Z)(["\n  0% , 50%{ box-shadow: 0 0  inset }\n  100% { box-shadow: 0 -20px inset }\n"]))),x=d.ZP.div(o||(o=(0,a.Z)(["\n  text-align: center;\n"]))),p=d.ZP.span(s||(s=(0,a.Z)(["\n  width: 40px;\n  height: 98px;\n  display: inline-block;\n  position: relative;\n  border: 2px solid #fff;\n  box-sizing: border-box;\n  color: rgba(255, 61, 0, 0.9);\n  border-radius: 20px 20px 4px 4px;\n  background: #fff;\n  animation: "," 2s linear infinite alternate;\n\n  &::after {\n    content: '';\n    box-sizing: border-box;\n    position: absolute;\n    left: 50%;\n    top: 0%;\n    transform: translate(-50%, -95%);\n    border: 2px solid #fff;\n    border-bottom: none;\n    background: #fff;\n    width: 15px;\n    height: 35px;\n    animation: "," 2s linear infinite alternate;\n  }\n"])),h,u)}}]);
//# sourceMappingURL=563.24e72321.chunk.js.map