{"version":3,"file":"static/js/563.24e72321.chunk.js","mappings":"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","sources":["hooks/context.tsx","components/suggest.tsx","components/search-form.tsx","modules/search-module.tsx","hooks/use-debounce.tsx","utils/throttle.ts","hooks/use-scroll.tsx","components/main-content.tsx","pages/main-page.tsx","store/favorites/favorites-selectors.ts","store/historys/history-actions.ts","ui/card/main-card.tsx","ui/input/input.tsx","ui/loader/loader.tsx"],"sourcesContent":["import { useContext } from 'react'\n\nimport { SearchContext, SearchDispatchContext } from '../context/search-context'\n\nexport const useSearch = () => useContext(SearchContext)\nexport const useSearchDispatch = () => useContext(SearchDispatchContext)\n","import React from 'react'\n\nimport styled from 'styled-components'\n\nimport { Link } from '../ui/link/link'\nimport { P1, P3 } from '../assets/styles/texts'\n\nimport { Routes } from '../constants/routes'\n\nimport type { modifyedBeer } from '../models/beer-model'\n\ntype Props = {\n  beers: modifyedBeer[]\n  searchValue: string\n  debounceValue: string\n  isLoading: boolean\n  focus: boolean\n}\n\nexport const Suggest = (props: Props) => {\n  const { beers, searchValue, debounceValue, isLoading, focus } = props\n  return (\n    <>\n      {focus && searchValue && debounceValue && (\n        <SearchWrapper>\n          {isLoading ? (\n            <Wrap>\n              <P3>Loading....</P3>\n            </Wrap>\n          ) : beers.length === 0 ? (\n            <Wrap>\n              <P3>Ничего не найдено</P3>\n            </Wrap>\n          ) : (\n            beers.map((item) => (\n              <Link to={`${Routes.CARD}/${item.id}`} key={item.id}>\n                <SearchItem>\n                  <P1>{item.name}</P1>\n                </SearchItem>\n              </Link>\n            ))\n          )}\n        </SearchWrapper>\n      )}\n    </>\n  )\n}\n\nconst SearchWrapper = styled.ul`\n  position: absolute;\n  top: 110px;\n  width: 315px;\n  min-height: 20px;\n  max-height: 300px;\n  overflow: overlay;\n  background: ${(props) => props.theme.colors.white};\n  border-radius: ${(props) => props.theme.borders.primary};\n  z-index: 10;\n`\n\nconst SearchItem = styled.li`\n  padding: 10px 0 5px 10px;\n`\n\nconst Wrap = styled.div`\n  text-align: center;\n`\n","import React, { useEffect, useState } from 'react'\n\nimport { SubmitHandler, useForm } from 'react-hook-form'\n\nimport { useSearchParams } from 'react-router-dom'\n\nimport styled from 'styled-components'\n\nimport { Input } from '../ui/input/input'\nimport { Button } from '../ui/button/button'\n\nimport { useSearchDispatch } from '../hooks/context'\n\nimport { Suggest } from './suggest'\n\nimport type { Search } from '../models/search-model'\nimport type { modifyedBeer } from '../models/beer-model'\n\ntype Props = {\n  onSubmitForm: (data: Search) => void\n  beers: modifyedBeer[]\n  isLoading: boolean\n  debounceValue: string\n}\n\nconst defaultSearchFormValues = {\n  search: ''\n}\n\nexport const SearchForm = (props: Props) => {\n  const [searchQuery] = useSearchParams()\n  const [focus, setFocus] = useState(false)\n  const dispatchContext = useSearchDispatch()\n  const { onSubmitForm, beers, isLoading, debounceValue } = props\n\n  const {\n    register,\n    reset,\n    handleSubmit,\n    watch,\n    setValue,\n    formState: { errors, isSubmitting, isDirty }\n  } = useForm<Search>({\n    defaultValues: defaultSearchFormValues,\n    mode: 'onBlur',\n    criteriaMode: 'all'\n  })\n\n  const query = searchQuery.get('beer_name')\n  useEffect(() => {\n    if (query) {\n      setValue('search', debounceValue)\n    }\n  }, [setValue, debounceValue, query])\n\n  let searchValue = watch('search', defaultSearchFormValues.search)\n\n  useEffect(() => {\n    dispatchContext({ type: 'addSearchValue', searchValue: searchValue })\n  }, [dispatchContext, searchValue])\n\n  const onSubmit: SubmitHandler<Search> = (data) => {\n    onSubmitForm(data)\n    reset()\n  }\n\n  const handleFocus = () => {\n    setFocus(true)\n  }\n\n  const handleBlur = () => {\n    setTimeout(() => {\n      setFocus(false)\n    }, 100)\n  }\n\n  return (\n    <Form onSubmit={handleSubmit(onSubmit)}>\n      <Input\n        placeholder='Search beers ...'\n        type='search'\n        {...register('search')}\n        errorOn={!!errors.search}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n      />\n      <Suggest\n        beers={beers}\n        searchValue={searchValue}\n        debounceValue={debounceValue}\n        isLoading={isLoading}\n        focus={focus}\n      />\n\n      <Button type='submit' size={'middle'} disabled={!isDirty || isSubmitting}>\n        Search\n      </Button>\n    </Form>\n  )\n}\n\nconst Form = styled.form`\n  display: flex;\n  gap: 10px;\n  width: 100%;\n  background-color: ${(props) => props.theme.colors.black};\n  border-top: 2px solid ${(props) => props.theme.colors.accent};\n  padding: 10px 0 0 10px;\n`\n","import React from 'react'\n\nimport { useNavigate } from 'react-router-dom'\nimport { useSearchParams } from 'react-router-dom'\n\nimport { SearchForm } from '../components/search-form'\n\nimport { useDebounce } from '../hooks/use-debounce'\n\nimport { useAppSelector, useAppDispatch } from '../hooks/store'\nimport { authSelectors } from '../store/auth/auth-selectors'\nimport { addHistory } from '../store/historys/history-actions'\n\nimport { useSearch } from '../hooks/context'\n\nimport { useDoSearchQuery } from '../store/rtk-query.ts/search-api'\n\nimport { Routes } from '../constants/routes'\n\nimport type { Search } from '../models/search-model'\n\nexport const SearchModule = () => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [_, setSearchQuery] = useSearchParams()\n  const dispatch = useAppDispatch()\n  const navigate = useNavigate()\n  const isAuth = useAppSelector(authSelectors.getIsAuth)\n  const searchValue = useSearch()\n\n  const debouncedSearchValue = useDebounce(searchValue.searchValue, 2000)\n\n  const { data: beers = [], isLoading } = useDoSearchQuery(\n    { beerName: debouncedSearchValue },\n    {\n      skip: !Boolean(debouncedSearchValue)\n    }\n  )\n\n  const handleSubmit = (data: Search) => {\n    navigate(Routes.SEARCH)\n    setSearchQuery({ beer_name: data.search })\n    if (isAuth) {\n      dispatch(addHistory(data.search))\n    }\n  }\n\n  return (\n    <SearchForm beers={beers} isLoading={isLoading} debounceValue={debouncedSearchValue} onSubmitForm={handleSubmit} />\n  )\n}\n","import { useEffect, useState } from 'react'\n\nexport function useDebounce<T>(value: T, delay?: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n  useEffect(() => {\n    const timer = setTimeout(() => setDebouncedValue(value), delay || 500)\n\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}\n","export const throttle = (fn: () => void, timeOut: number) => {\n  let timer = false\n  return function () {\n    if (timer) {\n      return\n    }\n\n    fn()\n    timer = true\n\n    setTimeout(() => {\n      timer = false\n    }, timeOut)\n  }\n}\n","import { useEffect, useState } from 'react'\n\nimport { throttle } from '../utils/throttle'\n\nexport const useScroll = (pageNumber: number) => {\n  const [page, setPage] = useState(pageNumber)\n\n  const scrollHandler = () => {\n    const height = document.body.offsetHeight\n    const screenHeight = window.innerHeight\n    const scrolled = window.scrollY\n    const threshold = height - screenHeight / 4\n    const position = scrolled + screenHeight\n\n    if (position >= threshold) {\n      setPage((page) => page + 1)\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('scroll', throttle(scrollHandler, 500))\n    return function () {\n      document.removeEventListener('scroll', scrollHandler)\n    }\n  }, [])\n\n  return page\n}\n","import React, { useEffect } from 'react'\n\nimport styled from 'styled-components'\n\nimport { useSearchParams } from 'react-router-dom'\n\nimport { CardForMainPage } from '../ui/card/main-card'\nimport { Loader } from '../ui/loader/loader'\n\nimport { useScroll } from '../hooks/use-scroll'\n\nimport { useGetBeersQuery } from '../store/rtk-query.ts/beers-api'\nimport { useAppSelector } from '../hooks/store'\nimport { favoritesSelectors } from '../store/favorites/favorites-selectors'\nimport { P3 } from '../assets/styles/texts'\n\nexport const MainContent = () => {\n  const pageScroll = useScroll(1)\n  const [searchQuery, setSearchPage] = useSearchParams()\n\n  useEffect(() => {\n    setSearchPage({ page: String(pageScroll) })\n  }, [pageScroll, setSearchPage])\n\n  const queryPage = Number(searchQuery.get('page'))\n\n  const {\n    data: beers = [],\n    isLoading,\n    isSuccess,\n    isError,\n    error\n  } = useGetBeersQuery({ page: queryPage }, { skip: !queryPage })\n  const favorites = useAppSelector(favoritesSelectors.getFavorites)\n\n  const newData = beers.map((item) => {\n    const element = favorites.find((element) => element.id === item.id)\n    if (element) {\n      return { ...item, isFavorite: element.isFavorite }\n    }\n    return { ...item, isFavorite: false }\n  })\n\n  let content\n\n  if (isLoading) {\n    content = <Loader />\n  } else if (isSuccess) {\n    content = (\n      <List>\n        {newData.length !== 0 ? (\n          newData.map((item) => (\n            <CardForMainPage\n              key={item.id}\n              id={item.id}\n              name={item.name}\n              imageUrl={item.imageUrl}\n              description={item.description}\n              abv={item.abv}\n              ibu={item.ibu ?? ''}\n              isFavorite={item.isFavorite}\n            />\n          ))\n        ) : (\n          <P3>The beer is out</P3>\n        )}\n      </List>\n    )\n  } else if (isError) {\n    throw new Error(error.toString())\n  }\n\n  return <Container>{content}</Container>\n}\n\nconst Container = styled.div`\n  width: 60%;\n`\n\nconst List = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 20px 0 80px 0;\n`\n","import React, { useEffect } from 'react'\n\nimport { BaseLayoutWithHeaderFooter } from '../components/layout/base-layout-with-header-footer'\nimport { MainContent } from '../components/main-content'\nimport { SearchModule } from '../modules/search-module'\nimport { Spiner } from '../ui/loader/spiner'\n\nimport { useAppDispatch, useAppSelector } from '../hooks/store'\n\nimport { getFavorites } from '../store/favorites/favorite-actions'\nimport { authSelectors } from '../store/auth/auth-selectors'\n\nconst MainPage = () => {\n  const dispatch = useAppDispatch()\n  const userStatus = useAppSelector(authSelectors.getUserStatus)\n\n  useEffect(() => {\n    dispatch(getFavorites())\n  }, [dispatch])\n\n  if (userStatus === 'initial' || userStatus === 'pending') {\n    return <Spiner />\n  }\n\n  return (\n    <BaseLayoutWithHeaderFooter>\n      <SearchModule />\n      <MainContent />\n    </BaseLayoutWithHeaderFooter>\n  )\n}\n\nexport default MainPage\n","import { RootState } from '../store'\n\nconst getFavorites = (state: RootState) => state.favourites.favorites\nconst getIsFavourites = (state: RootState) => state.favourites.isFavorites\n\nexport const favoritesSelectors = { getFavorites, getIsFavourites }\n","import { serviceApi } from '../../api/service-api'\n\nimport { addHistoryQuery, deleteHistoryQuery, getHistorysOfCurrentUser } from './historys-slices'\n\nimport type { AppDispatch } from '../store'\n\nexport const addHistory = (query: string) => (dispatch: AppDispatch) => {\n  serviceApi.addStory(query)\n  dispatch(addHistoryQuery(query))\n}\n\nexport const deleteHistory = (query: string) => (dispatch: AppDispatch) => {\n  serviceApi.deleteStory(query)\n  dispatch(deleteHistoryQuery(query))\n}\n\nexport const getHistorys = () => (dispatch: AppDispatch) => {\n  const currentUser = serviceApi.getCurrentUser()\n  if (currentUser) {\n    dispatch(getHistorysOfCurrentUser(currentUser.data.history))\n  } else {\n    dispatch(getHistorysOfCurrentUser([]))\n  }\n}\n","import React, { memo } from 'react'\n\nimport styled from 'styled-components'\n\nimport { Link } from '../link/link'\nimport { Button } from '../button/button'\nimport { H3, P2, P4 } from '../../assets/styles/texts'\nimport { IconBookMark } from '../../assets/icons/icon-favorites'\n\nimport { useToggle } from '../../hooks/use-toggle'\n\nimport { Routes } from '../../constants/routes'\n\nimport { useAppSelector, useAppDispatch } from '../../hooks/store'\nimport { authSelectors } from '../../store/auth/auth-selectors'\n\nimport { addFavorites, deleteFavorites } from '../../store/favorites/favorites-slices'\n\nimport defaultImage from '../../assets/images/default-image-card.jpg'\n\ntype Props = {\n  id: number\n  name: string\n  imageUrl: string\n  description: string\n  abv: number\n  ibu: number\n  isFavorite: boolean\n}\n\nexport const CardForMainPage = memo((props: Props) => {\n  const dispatch = useAppDispatch()\n  const { id, name, imageUrl, description, abv, ibu, isFavorite } = props\n  const isAuth = useAppSelector(authSelectors.getIsAuth)\n\n  const [isToggled, setToggled] = useToggle(isFavorite)\n\n  const handleClick = () => {\n    if (!isToggled) {\n      dispatch(addFavorites(props))\n    } else {\n      dispatch(deleteFavorites(id))\n    }\n    setToggled()\n  }\n\n  return (\n    <Container>\n      <ImageWrapper>\n        <ImageLink to={`${Routes.CARD}/${id}`}>\n          <img src={imageUrl ?? defaultImage} alt='beer' />\n        </ImageLink>\n      </ImageWrapper>\n      <Wrapper>\n        <Link to={`${Routes.CARD}/${id}`}>\n          <H3>{name}</H3>\n        </Link>\n        <P2>{description}</P2>\n        <P4>\n          ABV-{abv}% IBU-{ibu}\n        </P4>\n      </Wrapper>\n      <BookMark>\n        {isAuth ? (\n          <Button size={'small'} onClick={handleClick}>\n            <IconBookMark color={!isToggled ? 'dark' : 'blue'} />\n          </Button>\n        ) : null}\n      </BookMark>\n    </Container>\n  )\n})\n\nconst Container = styled.li`\n  display: flex;\n  align-items: flex-start;\n  gap: 20px;\n  padding: 15px;\n  background: ${(props) => props.theme.colors.white};\n  border-radius: ${(props) => props.theme.borders.primary};\n  border: 1px solid #7e6464;\n`\n\nconst ImageWrapper = styled.div`\n  align-self: center;\n`\n\nconst ImageLink = styled(Link)`\n  display: block;\n  width: 30px;\n  height: 120px;\n\n  & img {\n    object-fit: cover;\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 30px;\n`\n\nconst BookMark = styled.div`\n  flex: 1 0 auto;\n  text-align: end;\n  min-width: 40px;\n`\n","import React, { ForwardedRef, forwardRef, InputHTMLAttributes } from 'react'\n\nimport styled from 'styled-components'\n\ntype Props = {\n  errorOn?: boolean\n} & InputHTMLAttributes<HTMLInputElement>\n\nexport const Input = forwardRef((props: Props, ref: ForwardedRef<HTMLInputElement>): React.JSX.Element => {\n  const { errorOn, ...rest } = props\n\n  return (\n    <Wrapper>\n      <InputStyled $errorOn={errorOn} ref={ref} {...rest} />\n    </Wrapper>\n  )\n})\n\nconst Wrapper = styled.div`\n  max-width: 315px;\n  width: 100%;\n`\n\nconst InputStyled = styled.input<{ $errorOn?: boolean }>`\n  width: 100%;\n  height: 34px;\n  background: ${(props) => props.theme.colors.backgroundInput};\n  border-radius: ${(props) => props.theme.borders.primary};\n  border: 1px solid ${(props) => (props.$errorOn ? props.theme.colors.error : props.theme.colors.white)};\n  color: ${(props) => (props.$errorOn ? props.theme.text.error : props.theme.text.textInvert)};\n  padding-left: 10px;\n  margin-bottom: 18px;\n\n  &::placeholder {\n    color: ${(props) => props.theme.text.placeholder};\n  }\n\n  &:hover,\n  :focus {\n    ::placeholder {\n      color: ${(props) => props.theme.text.placeholder};\n    }\n  }\n`\n","import React from 'react'\n\nimport styled, { keyframes } from 'styled-components'\n\nexport const Loader = () => (\n  <Container>\n    <LoaderStyle />\n  </Container>\n)\n\nconst fill = keyframes`\n  0% { box-shadow: 0 0  inset }\n  50% , 100% { box-shadow: 0 -98px inset }\n`\n\nconst fillNeck = keyframes`\n  0% , 50%{ box-shadow: 0 0  inset }\n  100% { box-shadow: 0 -20px inset }\n`\n\nconst Container = styled.div`\n  text-align: center;\n`\n\nconst LoaderStyle = styled.span`\n  width: 40px;\n  height: 98px;\n  display: inline-block;\n  position: relative;\n  border: 2px solid #fff;\n  box-sizing: border-box;\n  color: rgba(255, 61, 0, 0.9);\n  border-radius: 20px 20px 4px 4px;\n  background: #fff;\n  animation: ${fill} 2s linear infinite alternate;\n\n  &::after {\n    content: '';\n    box-sizing: border-box;\n    position: absolute;\n    left: 50%;\n    top: 0%;\n    transform: translate(-50%, -95%);\n    border: 2px solid #fff;\n    border-bottom: none;\n    background: #fff;\n    width: 15px;\n    height: 35px;\n    animation: ${fillNeck} 2s linear infinite alternate;\n  }\n`\n"],"names":["useSearch","useContext","SearchContext","useSearchDispatch","SearchDispatchContext","Suggest","props","beers","searchValue","debounceValue","isLoading","focus","_jsx","_Fragment","children","SearchWrapper","Wrap","P3","length","map","item","Link","to","concat","Routes","CARD","id","SearchItem","P1","name","styled","ul","_templateObject","_taggedTemplateLiteral","theme","colors","white","borders","primary","li","_templateObject2","div","_templateObject3","defaultSearchFormValues","search","SearchForm","searchQuery","useSearchParams","setFocus","useState","dispatchContext","onSubmitForm","register","reset","handleSubmit","watch","setValue","formState","errors","isSubmitting","isDirty","useForm","defaultValues","mode","criteriaMode","query","get","useEffect","type","_jsxs","Form","onSubmit","data","Input","placeholder","errorOn","onFocus","handleFocus","onBlur","handleBlur","setTimeout","Button","size","disabled","form","black","accent","SearchModule","_","setSearchQuery","dispatch","useAppDispatch","navigate","useNavigate","isAuth","useAppSelector","authSelectors","getIsAuth","debouncedSearchValue","value","delay","debouncedValue","setDebouncedValue","timer","clearTimeout","useDebounce","useDoSearchQuery","beerName","skip","Boolean","SEARCH","beer_name","addHistory","useScroll","pageNumber","page","setPage","scrollHandler","height","document","body","offsetHeight","screenHeight","window","innerHeight","scrollY","addEventListener","throttle","fn","timeOut","removeEventListener","MainContent","pageScroll","setSearchPage","String","queryPage","Number","isSuccess","isError","error","useGetBeersQuery","favorites","favoritesSelectors","getFavorites","newData","element","find","isFavorite","content","Loader","List","_item$ibu","CardForMainPage","imageUrl","description","abv","ibu","Error","toString","Container","MainPage","userStatus","getUserStatus","Spiner","BaseLayoutWithHeaderFooter","state","favourites","getIsFavourites","isFavorites","serviceApi","addStory","addHistoryQuery","deleteHistory","deleteStory","deleteHistoryQuery","getHistorys","currentUser","getCurrentUser","getHistorysOfCurrentUser","history","memo","isToggled","setToggled","useToggle","ImageWrapper","ImageLink","src","defaultImage","alt","Wrapper","H3","P2","P4","BookMark","onClick","handleClick","deleteFavorites","addFavorites","IconBookMark","color","_templateObject4","_templateObject5","forwardRef","ref","rest","InputStyled","$errorOn","input","backgroundInput","text","textInvert","LoaderStyle","fill","keyframes","fillNeck","span"],"sourceRoot":""}